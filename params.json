{"name":"Virgil 3D GPU project","tagline":"","body":"# Virgil 3d project\r\n\r\n## What is Virgil?\r\nVirgil is a research project to investigate the possibility of creating a virtual 3D GPU for use inside qemu virtual machines, that allows the guest operating system to use the capabilities of the host GPU to accelerate 3D rendering. The plan is to have a guest GPU that is fully independent of the host GPU.\r\n\r\n## What exactly does it entail?\r\nThe project entails creating a virtual 3D capable graphics card for virtual machines running inside qemu. The design of this card is based around the concepts of Gallium3D to make writing Mesa and (eventually) Direct3D drivers for it easy. The card natively uses the Gallium TGSI intermediate representation for its shaders. The implementation of rendering for the card is done in the host\r\nsystem as part of qemu and is implemented purely on OpenGL so you can accelerated rendering on any sufficiently capable card/driver combination.\r\n\r\nThe project also consists of a complete Linux guest stack, composed of a Linux kernel KMS driver, X.org 2D DDX driver and Mesa 3D driver.\r\n\r\n## Current status\r\n- The project is currently under research and development.\r\n\r\n- It is not ready for distribution.\r\n\r\n- There is no current roadmap or date for when it will be ready for distribution.\r\n\r\n- The project will hopefully be implemented as part of the upstream projects once some sort of API stability can be found and maintained.\r\n\r\n- At this time the project is interested in finding collaborators and developers who are working on similar ideas and would like to discuss how they could get involved and would like input on other use cases that could be accommodated within the scope of this project.\r\n\r\n- The project isn't currently for end users, earlier adopters, or benchmarking article writers.\r\n\r\n### So what can it do now?\r\nCan render some 3D applications, gnome-shell and openarena being the primary ones, passes some piglit tests but a lot left to fix. I'll put up another page with more info on what else needs to happen.\r\n\r\n## Initial architecture\r\nThe initial architecture is based around using virtio as a transport mechanism to transport resources and state objects based on the Gallium3D API from Mesa. Shaders are currently based on the Gallium3D TGSI representation. The internal guest driver model is the Linux DRM/KMS model.\r\n\r\nI've got a work in progress Google document with a lot more technical information in it:\r\nhttps://docs.google.com/document/d/1cL2sEi5DAd-qY_OzyNiUyIbcU2ZvcI8lhv3PWzFoH_w/pub\r\n\r\n### QEMU device\r\nThe virgl device is a VGA device inside QEMU that exposes a single virtio ring to the guest. The qemu process has a new thread running that processes the ring and calls the renderer library to process the commands and have the host GL implementation render them. The renderer library is currently provided by the Mesa codebase.\r\n\r\n## Scope\r\nThe project is currently investigating the desktop virtualisation use case only. This use case is where the viewer, host and guest are all running on the same machine (i.e. workstation or laptop). Some areas are in scope for future investigation but not being looked at, at this time.\r\n\r\n### Future scope\r\n* Remoting rendering using a codec solution.\r\n* Windows guest, Direct3D drivers.\r\n* Other architectures\r\n* Limited environment renderer (GLES2)\r\n\r\n### Out of scope\r\n* Passing through GPUs or subsets of GPU capabilities.\r\n\r\n# Repos\r\nAll repos are currently in Dave's freedesktop git trees. Four upstream projects are involved: qemu, mesa, Linux kernel and X.org DDX driver. The code is all MIT licensed so far, except the qemu bits which are under the GPL. There are no guarantees this code will build or work on any given day at any given time, the project isn't ready for that yet.\r\n\r\nQEMU: contains the basic virgl virtio VGA device, and basic GL setup\r\nhttp://cgit.freedesktop.org/~airlied/qemu/log/?h=virgl\r\n\r\nMesa: the GL renderer and the guest 3D driver\r\nhttp://cgit.freedesktop.org/~airlied/mesa/log/?h=renderer-1\r\n\r\nLinux kernel: the guest DRM/KMS driver\r\nhttp://cgit.freedesktop.org/~airlied/linux/log/?h=virgl\r\n\r\nX.org DDX driver:\r\nhttp://cgit.freedesktop.org/~airlied/xf86-video-virgl\r\n\r\n# Demos\r\nVirgil booting Fedora 19 and running gnome-shell:\r\nhttps://www.youtube.com/watch?v=ZuuF092RDDc\r\n\r\nVirgil running openarena inside the VM.\r\nhttps://www.youtube.com/watch?v=ONFGnUaln-4\r\n\r\n# Questions\r\nHere are some Q/A I've thought up so far:\r\nhttp://virgil3d.github.io/questions.html\r\n\r\n# Building\r\nhere are some hopeful build instructions:\r\nhttps://docs.google.com/document/d/1CNiN0rHdfh7cp9tQ3coebNEJtHJzm4OCWvF3qL4nucc/pub\r\n\r\n# Authors and Contributors\r\nVirgil is a research project undertaken by Dave Airlie at Red Hat. It builds on lots of open source work in a number of projects, primarily the Gallium 3D code from the Mesa project.\r\n\r\n# Support or Contact\r\nNo mailing list yet, you can find me on irc generally, and at my normal email addresses.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}